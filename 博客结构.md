# MCP å¤šæœåŠ¡å™¨ç¤ºä¾‹ï¼šé›†æˆåƒé—®å¤§æ¨¡å‹çš„å¤šå·¥å…·æ™ºèƒ½æœåŠ¡

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ Python å®ç°çš„å¤šæœåŠ¡å™¨ MCPï¼ˆModel Context Protocolï¼‰ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åŒæ—¶é›†æˆå¤šä¸ª MCP æœåŠ¡å™¨ï¼Œå®ç°æ•°å­¦è®¡ç®—å’Œå¤©æ°”æŸ¥è¯¢çš„æ™ºèƒ½åŒ–æœåŠ¡ã€‚

## ğŸš€ é¡¹ç›®ç‰¹è‰²

- **å¤šæœåŠ¡å™¨æ¶æ„**ï¼šåŒæ—¶è¿è¡Œæ•°å­¦å’Œå¤©æ°”ä¸¤ä¸ª MCP æœåŠ¡å™¨
- **MCP åè®®å®ç°**ï¼šåŸºäºæœ€æ–°çš„ Model Context Protocol æ ‡å‡†
- **åƒé—®å¤§æ¨¡å‹é›†æˆ**ï¼šæ”¯æŒé˜¿é‡Œäº‘åƒé—®æ¨¡å‹çš„ API è°ƒç”¨
- **LangChain æ¡†æ¶**ï¼šä½¿ç”¨ LangChain å’Œ LangGraph æ„å»ºæ™ºèƒ½ä»£ç†
- **å·¥å…·é“¾æ‰©å±•**ï¼šå¯è½»æ¾æ‰©å±•æ›´å¤šè‡ªå®šä¹‰å·¥å…·æœåŠ¡å™¨
- **å¼‚æ­¥å¤„ç†**ï¼šå…¨å¼‚æ­¥æ¶æ„ï¼Œé«˜æ€§èƒ½å¤„ç†
- **å¤šä¼ è¾“åè®®**ï¼šæ”¯æŒ stdio å’Œ HTTP ä¸¤ç§ä¼ è¾“æ–¹å¼

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### ğŸ”§ æ•°å­¦å·¥å…·æœåŠ¡å™¨
- `add(a, b)`ï¼šä¸¤æ•°ç›¸åŠ 
- `multiply(a, b)`ï¼šä¸¤æ•°ç›¸ä¹˜
- ä¼ è¾“æ–¹å¼ï¼šstdio

### ğŸŒ¤ï¸ å¤©æ°”å·¥å…·æœåŠ¡å™¨
- `get_weather(location)`ï¼šè·å–æŒ‡å®šåœ°ç‚¹çš„å¤©æ°”ä¿¡æ¯
- ä¼ è¾“æ–¹å¼ï¼šHTTP (streamable-http)
- æœåŠ¡ç«¯å£ï¼š8000

### ğŸ¤– AI å¢å¼ºåŠŸèƒ½
- è‡ªç„¶è¯­è¨€é—®é¢˜è§£æ
- æ™ºèƒ½å·¥å…·é€‰æ‹©å’Œè°ƒç”¨
- å¤šæœåŠ¡å™¨å·¥å…·ç»Ÿä¸€ç®¡ç†
- ä¸Šä¸‹æ–‡ç†è§£å’Œæ¨ç†

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Python 3.11+**
- **MCP (Model Context Protocol)**ï¼šæ¨¡å‹ä¸Šä¸‹æ–‡åè®®
- **LangChain**ï¼šå¤§è¯­è¨€æ¨¡å‹åº”ç”¨æ¡†æ¶
- **LangGraph**ï¼šæ™ºèƒ½ä»£ç†æ„å»º
- **FastMCP**ï¼šå¿«é€Ÿ MCP æœåŠ¡å™¨å®ç°
- **MultiServerMCPClient**ï¼šå¤šæœåŠ¡å™¨å®¢æˆ·ç«¯
- **åƒé—®å¤§æ¨¡å‹**ï¼šé˜¿é‡Œäº‘ DashScope API

## ğŸ“¦ å®‰è£…ä¾èµ–

### 1. ç¯å¢ƒå‡†å¤‡

* ä¾èµ–æ–‡ä»¶å‡†å¤‡

```python:requirements.txt
mcp>=1.11.0
pydantic>=2.0.0
typing-extensions>=4.14.1
openai>=1.95.0
python-dotenv>=1.0.0
requests>=2.25.0
```

* å¯åŠ¨Pythonç¯å¢ƒ

```bash
# æ¿€æ´» conda ç¯å¢ƒ
conda activate dba

# å®‰è£…é¡¹ç›®ä¾èµ–
pip install -r requirements.txt
```

### 2. ç¯å¢ƒé…ç½®
åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®åƒé—® APIï¼š

```env
# é˜¿é‡Œäº‘åƒé—®APIé…ç½®
DASHSCOPE_API_KEY=your_api_key_here
DASHSCOPE_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
DASHSCOPE_MODEL=qwen-turbo
```

ğŸ’¡ **è·å– API Key**ï¼šè®¿é—® [é˜¿é‡Œäº‘ DashScope](https://bailian.console.aliyun.com/) æ³¨å†Œå¹¶è·å– API å¯†é’¥

## ğŸ“ é¡¹ç›®ç»“æ„

```
02-multiple-mcp-server/
â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡é…ç½®
â”œâ”€â”€ math_server.py       # æ•°å­¦è®¡ç®— MCP æœåŠ¡å™¨
â”œâ”€â”€ weather_server.py    # å¤©æ°”æŸ¥è¯¢ MCP æœåŠ¡å™¨
â”œâ”€â”€ client.py           # å¤šæœåŠ¡å™¨å®¢æˆ·ç«¯ç¤ºä¾‹
â”œâ”€â”€ requirements.txt    # ä¾èµ–
â””â”€â”€ README.md          # é¡¹ç›®æ–‡æ¡£
```

## ğŸ” æ ¸å¿ƒä»£ç è§£æ

### æ•°å­¦æœåŠ¡å™¨ (math_server.py)

### å¤©æ°”æœåŠ¡å™¨ (weather_server.py)


### å®¢æˆ·ç«¯ (client.py)


## ğŸš€ é¡¹ç›®ä½¿ç”¨

### 1. å¯åŠ¨å¤©æ°”æœåŠ¡å™¨
```bash
python weather_server.py
```
å¤©æ°”æœåŠ¡å™¨å°†åœ¨ `http://localhost:8000` å¯åŠ¨

### 2. è¿è¡Œå¤šæœåŠ¡å™¨å®¢æˆ·ç«¯
```bash
python client.py
```

### 3. ç¤ºä¾‹äº¤äº’


## ğŸ”§ æœåŠ¡å™¨é…ç½®è¯´æ˜

### ä¼ è¾“åè®®å¯¹æ¯”

### å®¢æˆ·ç«¯é…ç½®

## ğŸ› å¸¸è§é—®é¢˜

### Q: å¤©æ°”æœåŠ¡å™¨è¿æ¥å¤±è´¥
**A**: ç¡®ä¿å¤©æ°”æœåŠ¡å™¨å·²å¯åŠ¨å¹¶è¿è¡Œåœ¨ç«¯å£ 8000ï¼š
```bash
python weather_server.py
```

## ğŸ”„ æ‰©å±•å¼€å‘


## ğŸ“š ç›¸å…³èµ„æº

## ğŸ¯ é¡¹ç›®äº®ç‚¹
